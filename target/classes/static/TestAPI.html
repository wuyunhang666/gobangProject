<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TestAPI</title>
</head>
<body>
    <input type="text" id="message">
    <button id="submit">提交</button>
    <script>
        let websocket = new WebSocket('ws://127.0.0.1:8080/test');
        websocket.onopen=function(){
            console.log('连接建立');
        }
        websocket.onmessage=function(e){
            console.log("收到消息："+e.data);
        }
        websocket.onerror=function(){
            console.log('连接异常！');
        }
        websocket.onclose=function(){
            console.log('连接关闭！');
        }
        //点击按钮后，通过websocket先服务端发送信息
        let input = document.querySelector('#message');
        let button = document.querySelector('#submit');
        button.onclick=function(){
            console.log('发送信息：'+input.value);
            websocket.send(input.value);
        }
    </script>
</body>
</html>